{% extends "base.html" %}
{% block title %}المكان والزمان{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/activities.css') }}">
{% endblock %}
{% block body %}
  <div class="plac-container">
        <!-- تعريف المكان والزمان -->
        <div id="title">
          <h1 class="addr">المكان والزمان</h1>
      </div>
      <div id="definition" class="definition">
          <p> المكان عنصر هام جداً، ليست هناك أحداث خارج المكان الذي تجري فيه الأحداث، وتتحرك فوقه، كوخاً أم قرية أم مدينة، أم غيرها <br> من الأماكن التي يصعب حصرها. ويكون السؤال عنها بأين ؟
            <br> الزمان مثله، مثل المكان، بل يرتبط به ارتباطاً وثيقاً، إذ لامكان، من دون زمان، والثاني منهما، هو الماضي، أو الحاضر، أو المستقبل، <br> صباحاً، او مساءاً تبعاً للكاتب. والسؤال عنه يكون، بمتى؟ </p> 
      </div>

        <!-- قصة 1: ليلى والذئب -->
        <div class="story" id="story-1">
            <h3 class="Story-place-time">قصة ليلى والذئب</h3>
            <div class="story-content">
                <img src="C:\Users\kholo\source\repos\Project1\v.L\mulhem\website\static\images\laila.jpg" alt="ليلى والذئب">
                
                
                <p>
                    في قديم الزمان، كانت هناك فتاة تُدعى "ذات الرداء الأحمر"، ترتدي دائمًا رداءً أحمر جميلًا أهَدته لها جدتها. طلبت منها <br> والدتها إيصال سلة طعام لجدتها المريضة التي تعيش وحدها في الغابة، مع تحذيرها بعدم الابتعاد عن الطريق.أثناء رحلتها، <br> ظهر لها ذئب ماكر وسألها عن وجهتها، فأخبرته بمكان منزل جدتها. خطط الذئب بخبث لإيقاعها في الفخ، فأقنعها بجمع <br> الأزهار كهدية لجدتها، مما تسبب في تأخيرها. استغل الذئب الوقت وذهب إلى منزل الجدة، خدعها بصوته الناعم وأكلها، ثم <br> ارتدى ملابسها وانتظر ذات الرداء الأحمر عندما وصلت الفتاة، لاحظت أن هناك شيئًا غريبًا في "جدتها"، وسألتها عن أذنيها <br> وعينيها وفمها الكبير فجأة، قفز الذئب ليأكلها، لكن لحسن الحظ، كان هناك صياد قريب سمع الضجة. اقتحم المنزل، وقتل <br> الذئب،وحرر الجدة والفتاة. شكرت ذات الرداء الأحمر وجدتُها الصياد.
                </p>
               
            </div>
            <div class="time-questions">
                <p class="Story-place-time" >أين كانت ليلى عندما رأت الذئب ؟ اسحب الإجابة إلى المربع الفارغ.</p>
                <div class="drag-container">
                    <div class="dropzone" ondrop="drop(event, 'في الغابة')" ondragover="allowDrop(event)"></div>
                    <div class="options">
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place1">في المدينة</span>
                        <div class="confetti-right confetti-click">
                            <span class="draggable" draggable="true" ondragstart="drag(event)" id="place2">في الغابة</span>
                            <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                            <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                            <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                            <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                            <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                            <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                            <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>      
                        </div>
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place3">في المنزل</span>
                    </div>
                </div>
                <p class="Story-place-time" > كتى كانت ليلى في طريقها إلى جدتها ؟</p>
                <div class="choices">
                    <div class="confetti-right confetti-click">
                        <button class="right" onclick="checkAnswer(this, 'في الصباح الباكر')">في الصباح الباكر</button>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>      
                    </div>

                  <button onclick="checkAnswer(this, ' المساء')">في المساء</button>
                  <button onclick="checkAnswer(this, ' الماضي')">في الماضي </button>
              </div>
            </div>  
            <div class="navigation">
                <button onclick="nextStory(1)">التالي &rarr;</button>
            </div>
        </div>

        <!-- قصة 2: الشجاعة في مواجهة التحديات -->
        <div class="story hidden" id="story-2">
            <h3 class="Story-place-time"> الشجاعة في مواجهة التحديات </h3>
            <div class="story-content">
                <img src="C:\Users\kholo\source\repos\Project1\v.L\mulhem\website\static\images\hasan.jpg" alt=" الشجاعة في مواجهة التحديات ">
                <p>
                    في صباح يومٍ مشمس، كان “حسن” يستعد للذهاب إلى مدرسته لكنه كان متوترًا قليلًا لأنه كان سيخوض اختبارًا في <br> الرياضيات لأول مرة عندما وصل إلى المدرسة، دخل الصف ووجد أصدقائه يتحدثون عن الاختبار شعر حسن ببعض <br> القلق,لكن معلمته “مريم” دخلت وقالت بابتسامة: “صباح الخير يا أبطال! اليوم سنختبر مهاراتكم في الرياضيات، لكن لا <br> داعي للقلق،كلنا هنا لنتعلم معًا.” بدأ الاختبار، وكان حسن يشعر ببعض التوتر، لكنه تذكر كلمات معلمته. قرر أن يأخذ نفسًا <br> عميقًا،ثم بدأ الإجابة على الأسئلة واحدة تلو الأخرى بهدوء وتركيز. بعد فترة، عادت معلمة مريم لتوزيع الأوراق،وقالت: <br> “أنتم جميعًا قدمتم أداءً جيدًا.المهم ليس الفوز أو الدرجات، بل أنكم حاولتم وقدمتم أفضل ما لديكم.” شعر حسن بالسعادة <br> لأنه لم يستسلم للقلق ونجح في مواجهة التحدي. وتعلم أنه لا يوجد شيء يستحق الخوف طالما أن الشخص يبذل جهده.
                </p>
            </div>
            <div class="time-questions">
                <p class="Story-place-time"> أين كان حسن عندما شعر بالتوتر بسبب الإختبار ؟ اسحب الإجابة إلى المربع الفارغ</p>
                <div class="drag-container">
                    <div class="dropzone" ondrop="drop(event, 'في المدرسة')" ondragover="allowDrop(event)"></div>
                    <div class="options">
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place4">في المنزل</span>
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place5">في المدرسة</span>
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place6">في الحديقه</span>
                    </div>
                </div>
                <p class="Story-place-time" >متى كان حسن متوترًا ؟ </p>
                <div class="choices">
                    <button onclick="checkAnswer(this, ' عندما كان في  ')"> عندما كان في المنزل  </button>
                    <div class="confetti-right confetti-click">
                        <button onclick="checkAnswer(this, 'في الصباح')">في الصباح</button>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>      
                    </div>
                    <button onclick="checkAnswer(this, 'في ')"> في المساء </button>
                </div>
            </div>
            <div class="navigation">
                <button onclick="prevStory(2)">&larr; السابق</button>
                <button onclick="nextStory(2)">التالي &rarr;</button>
            </div>
        </div>

        <!-- قصة 3: مغامرة القبطان الصغير  -->
        <div class="story hidden" id="story-3">
            <h3 class="Story-place-time"> مغامرة القبطان الصغير </h3>
            <div class="story-content">
                <img src="C:\Users\kholo\source\repos\Project1\v.L\mulhem\website\static\images\sami.jpg" alt=" مغامرة القبطان الصغير ">
            
                <p>
                    في يوم من أيام الشتاء الباردة، كان هناك قبطان صغير اسمه “سامي”، يعيش على متن سفينة كبيرة تبحر في البحر الهادئ<br>
                    كانت السفينة تسير ببطء بسبب الرياح الضعيفة،وكانت الأمواج ناعمة، مما جعل الرحلة هادئة جدًا. في تلك اللحظة،قرر <br>
                    سامي أن يذهب في مغامرة داخل السفينة. كان يحمل حقيبته الصغيرة ويذهب إلى غرف الطاقم، حيث يراقب البحارة وهم <br>
                    يعملون لكن فجأة، سمع صوتًا غريبًا قادمًا من أسفل السفينة هرع سامي ليرى ما يحدث، وعندما وصل إلى غرفة المحرك <br>
                    اكتشف أن هناك مشكلة صغيرة في أحد المحركات. لم يكن القبطان الصغير خائفًا، بل قرر أن يساعد بحماسية أخذ مفك <br>
                    البراغي وبدأ في فك القطع المكسورة، وعندما أصلحها، عاد المحرك للعمل من جديد عندما علم باقي أفراد الطاقم بما فعله <br>
                    سامي، صفقوا له وقالوا له: “أنت قبطان شجاع!”، بينما ابتسم سامي وقال: “كلنا يجب أن نساعد بعضنا في البحر!” ومنذ <br>
                    ذلك اليوم، أصبح سامي معروفًا بين أفراد الطاقم بشجاعته وذكائه، وأصبح حلمه أن يكون قبطان السفينة يومًا ما.
                </p>
            </div>
            <div class="time-questions">
                <p class="Story-place-time" >أين كانت مغامرة سامي ؟ اسحب الإجابة إلى المربع الفارغ.</p>
                <div class="drag-container">
                    <div class="dropzone" ondrop="drop(event, 'على متن سفينة في البحر')" ondragover="allowDrop(event)"></div>
                    <div class="options">
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place7">في القرية</span>
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place8">على متن سفينة في البحر</span>
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place9">في المنزل</span>
                    </div>
                </div>
                <p class="Story-place-time" >متى كانت مغامرة سامي على السفينة؟</p>
                <div class="choices">
                    <button onclick="checkAnswer(this, 'في العمل')">في وقت العمل</button>
                    <button onclick="checkAnswer(this, 'مشمس')"> في يوم مشمس </button>
                    <div class="confetti-right confetti-click">
                        <button onclick="checkAnswer(this, 'في يوم من أيام الشتاء')">في يوم من أيام الشتاء </button>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>      
                    </div>
                </div>
            </div>
            <div class="navigation">
                <button onclick="prevStory(3)">&larr; السابق</button>
                <button onclick="nextStory(3)">التالي &rarr;</button>
            </div>
        </div>

        <!-- قصة 4: قصة محمود والعصفور  -->
        <div class="story hidden" id="story-4">
            <h3 class="Story-place-time">قصة محمود والعصفور </h3>
            <div class="story-content">
                <img src="C:\Users\kholo\source\repos\Project1\v.L\mulhem\website\static\images\App.jpg" alt="قصة محمود والعصفور  ">
                <p>
                    في صباح يوم دافئ من أيام الخريف، كان هناك طفل صغير يُدعى “محمود” يعيش في مزرعة صغيرة تقع بين الجبال كانت <br> المزرعة مليئة بالحيوانات والنباتات التي يحب محمود أن يعتني بها. في ذلك اليوم، قرر محمود أن يذهب إلى البستان لقطف <br> التفاح الناضج. حمل سلة صغيرة وبدأ في جمع التفاح الأحمر اللامع الذي كان يزين الأشجار بينما كان يقطف التفاح، سمع <br> صوتًا ضعيفًا قادمًا من وراء الأشجار محمود اقترب بحذر ليكتشف أنه كان عصفورًا صغيرًا عالقًا في أحد الأغصان شعر <br> بالقلق وقرر مساعدته. ببطء، أخرج العصفور من بين الأغصان وحرره بحذر. عندما شعر العصفور بالحرية، طار بعيدًا،<br> وحلق في السماء الزرقاء.ابتسم محمود وهو يشاهد العصفور يطير، وقال لنفسه: “إن المساعدة تجعل العالم أجمل.” وعاد <br> إلى المزرعة وهو يشعر بالفخر لأنه أنقذ العصفور.
                </p>
            </div>
            <div class="time-questions">
                <p class="Story-place-time">أين كان محمود عندما وجد العصفور العالق؟ اسحب الإجابة إلى المربع الفارغ.</p>
                <div class="drag-container">
                    <div class="dropzone" ondrop="drop(event, 'في بستان مزرعته')" ondragover="allowDrop(event)"></div>
                    <div class="options">
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place10">في الحديقة</span>
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place11">في بستان مزرعته</span>
                        <span class="draggable" draggable="true" ondragstart="drag(event)" id="place12">على الشاطئ</span>
                    </div>
                </div>
                <p class="Story-place-time">متى كان يقطف محمود التفاح؟</p>
                <div class="choices">
                    <button onclick="checkAnswer(this, 'بعد المطر ')"> في مساء ممطر </button>
                    <div class="confetti-right confetti-click">
                        <button onclick="checkAnswer(this, 'في صباح يوم دافئ من أيام الخريف')">في صباح يوم دافئ من أيام الخريف </button>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                        <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>      
                    </div>
                    <button class="=wrong-button" onclick="checkAnswer(this, 'قبل المساء')">في المساء </button>
                </div>
            </div>
            <div class="navigation">
                <button onclick="prevStory(4)">&larr; السابق</button>
                <button onclick="finish()">إنهاء النشاط</button>
            </div>
        </div>
        <!-- نهاية النشاط -->
        <div class="story hidden" id="end">
          <h2 class="endTime"> تهانينا!
            <br>
            🌟 لقد انتهيت من النشاط بنجاح.🌟 </h2>
          <p class="endPlace"> "المكان والزمان هما أساس كل قصة رائعة! المكان يجعل الأحداث تبدو حقيقية ومليئة بالحياة، والزمان يساعدنا نفهم متى تحدث الأشياء. عندما تختار المكان والزمان بعناية، تصبح قصتك ممتعة ومليئة بالإثارة للقارئ!" </p>
        
        </button>
      </div>
    </div>
{% endblock %}
{% block script %}
 <script>
      let currentStory = 1;
// الانتقال إلى القصة التالية
function nextStory(current) {
    document.getElementById(`story-${current}`).classList.add('hidden');
    const next = document.getElementById(`story-${current + 1}`);
    if (next) next.classList.remove('hidden');
}

// العودة إلى القصة السابقة
function prevStory(current) {
    document.getElementById(`story-${current}`).classList.add('hidden');
    const prev = document.getElementById(`story-${current - 1}`);
    if (prev) prev.classList.remove('hidden');
}

// إنهاء النشاط
function finish() {
    const stories = document.querySelectorAll('.story');
    let allCompleted = true;

    // التحقق من إكمال جميع الأسئلة
    stories.forEach(story => {
        const dropzones = story.querySelectorAll('.dropzone');
        dropzones.forEach(zone => {
            if (!zone.classList.contains('success')) {
                allCompleted = false;
            }
        });
    });

    if (allCompleted) {
        stories.forEach(story => story.classList.add('hidden'));
        document.getElementById('definition').classList.add('hidden'); // إخفاء التعريف
        document.getElementById('title').classList.add('hidden'); // إخفاء العنوان
        document.getElementById('end').classList.remove('hidden'); // عرض صندوق النهاية
    } else {
        alert('أجب على جميع الأسئلة لإكمال النشاط!');
    }
}

// التعامل مع السحب والإفلات
function allowDrop(event) {
    event.preventDefault();
}

function drag(event) {
    event.dataTransfer.setData('text', event.target.id);
}

function drop(event, correctAnswer) {
    event.preventDefault();
    const data = event.dataTransfer.getData('text');
    const draggedElement = document.getElementById(data);

    if (draggedElement.textContent === correctAnswer) {
        event.target.textContent = draggedElement.textContent;
        event.target.classList.add('success');
        event.target.classList.remove('error');
        
    } else {
        event.target.classList.add('error');
        setTimeout(() => {
            event.target.classList.remove('error');
           }, 1000); // إزالة اللون الأحمر بعد ثانية
    }
    
}

// التحقق من الإجابات الصحيحة (اختيار)
function checkAnswer(button, correctAnswer) {
    const buttons = button.parentElement.querySelectorAll('button');
   

    // التحقق من صحة الإجابة
    if (button.textContent.trim() === correctAnswer) {
        button.classList.add('correct'); // الإجابة الصحيحة تصبح خضراء
    } else {
        const audio = document.getElementById('sound-wrong');
        audio.currentTime = 0; // Return Voice To The Start
        audio.play();
        button.classList.add('wrong'); // الإجابة الخاطئة تصبح حمراء
       

        // إظهار الإجابة الصحيحة
        buttons.forEach(btn => {
            if (btn.textContent.trim() === correctAnswer) {
                btn.classList.add('correct');
            }
        });
    }
}
    </script>
    {% endblock %}