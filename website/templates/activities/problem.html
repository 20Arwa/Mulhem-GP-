{% extends "base.html" %}
{% block title %}ุงููุดููุฉ{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/activities.css') }}">
{% endblock %}
<!-- Questions & Answers -->
{% block body %}
<div class="activity problem-container characters_activity container my-5 p-4 py-5 px-5 rounded-4 position-relative">
    <div class="explanation text-center mb-5 bg-white rounded-4 p-3 px-4 w-75 mx-auto position-relative">
        <h4 class="title mb-3"><i class="fa-regular fa-comment fs-4 ms-2"></i>ูุงูู ุงููุดููุฉ ุ</h4>
        <p>ุงููุดููุฉ ูู ุญุงูุฉ ุฃู ูููู ููุงุฌูู ุงูุดุฎุต ููุฌุนูู ูุดุนุฑ ุจุงูุชุญุฏู ุฃู ุงูุญูุฑุฉ. ูููู ุฃู ุชููู ูุดููุฉ ุฏุงุฎููุฉุ ูุซู ุดุนูุฑ ุงูุดุฎุต ุจุงูุญุฒู ุฃู ุงูุฎููุ ุฃู ูุดููุฉ ุฎุงุฑุฌูุฉุ ูุซู ููุงุฌูุฉ ุตุนูุจุฉ ูู ุชุญููู ูุฏู ูุง. ุงูุดุฎุต ุฃู ุงูุดุฎุตูุงุช ูู ุงููุตุฉ ูุณุนูู ูุญู ูุฐู ุงููุดููุฉุ ููุง ูุฌุนู ุงูุฃุญุฏุงุซ ุชุชุทูุฑ ูุชูุชูู ูู ูุฑุญูุฉ ุฅูู ุฃุฎุฑู.
        </p>
        <audio class="w-50 rounded-4" controls controlslist="nodownload noplaybackrate">
            <source id="audioSource" src="../../static/audio/activity/ุงููุดููุฉ.mp3" type="audio/mpeg">
            ุงููุชุตูุญ ุงูุฎุงุต ุจู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช
        </audio>
    </div>
    <div id="carouselCaracthers" class="carousel slide">
        <div class="carousel-inner">
            <!-- 1 -->
            <div class="carousel-item section-3 active">
                <div class="small-activity text-center pt-3  mx-auto">
                    <div class="content mx-auto">
                        <h5 class="text-end"><i class="fa-regular fa-comment fs-4 ms-2"></i>ุงุณุชุฎุฑุฌ ุงููุดููุฉ ูู ุงููุตุฉ ุงูุชุงููุฉ:</h5>
                        <div class="story maryam d-flex align-items-center gap-2 rounded-4 p-3 py-2 mx-auto my-3 border border-2 border-white">
                            <div class="right-side text-center">  
                                <h5 class="mb-0"><i class="fa-solid fa-book ms-2 fs-6"></i>ูุบุงูุฑุฉ ูุฑูู ูุงููุชุงุจ ุงูุณุญุฑู</h5>
                                <img class="my-3 rounded-4" src="../..//static/images/ุงููุชุงุจ ุงูุณุญุฑู.jpeg" alt=" ูุฑุญุงู">
                                <audio class="w-100 rounded-4" controls controlslist="nodownload noplaybackrate">
                                    <source id="audioSource" src="../../static/audio/activity/ุงููุชุงุจ ุงูุณุญุฑู.mp3" type="audio/mpeg">
                                    ุงููุชุตูุญ ุงูุฎุงุต ุจู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช
                                </audio>
                            </div>
                            <p class="left-side text-end mb-0">
                                ุฐุงุช ูููุ ูุงูุช ูุฑูู ุชุณูุฑ ูู ุทุฑูููุง ุฅูู ุงููุฏุฑุณุฉ ุนูุฏูุง ูุงุญุธุช ููุชุจุฉ ูุฏููุฉ ูู ุชุฑูุง ูู ูุจู.<br>
                                ุฏูุนูุง ุงููุถูู ููุฏุฎูู. ูุงูุช ุงูููุชุจุฉ ูููุฆุฉ ุจุงููุชุจ ุงููุฏููุฉ ูุงููุฎุทูุทุงุชุ ููู ุดูุฆูุง ุบุฑูุจูุง ุฌุฐุจ ุงูุชุจุงููุง.<br>
                                ูุงู ููุงู ูุชุงุจ ูุจูุฑ ููุชูุญ ุนูู ุทุงููุฉ ูู ุงูููุชุตูุ ูุชููุฌุช ุตูุญุงุชู ุจููู ุฐูุจู ุฎุงูุช.<br>
                                ุงูุชุฑุจุช ูุฑูู ูู ุงููุชุงุจ ุจุญุฐุฑุ ูุนูุฏูุง ููุณุชูุ ุงููุชุญ ุจุงุจ ุณุญุฑู ุฃูุงููุง.<br>
                                ูุฌุฏุช ููุณูุง ูุฌุฃุฉ ูู ุนุงูู ูููุก ุจุงููุตุต ูุงูุดุฎุตูุงุช ุงูุฎูุงููุฉ.<br>
                                ููู ุณุฑุนุงู ูุง ุฃุฏุฑูุช ุฃู ููุงู ูุดููุฉ ูุจูุฑุฉ: ุงููููุงุช ุจุฏุฃุช ุชุฎุชูู ูู ุงููุชุจุ ูุฅุฐุง ูู ุชูุญู ุงููุดููุฉุ ุณุชุฎุชูู ูู ุงููุตุต ุฅูู ุงูุฃุจุฏ!<br>
                            </p>
                            
                        </div>
                    </div>


                    <div class="quiz-wrapper">
                        <h5 class="prompt my-4 text-end">ูู ุจุณุญุจ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูุฃููุชูุง ุฏุงุฎู ุงููุฑุจุน:</h5>
                        <h5 class="mb-3 d-flex justify-content-center align-items-center"> 
                            <i class="fa-regular fa-comment fs-5 ms-1"></i>
                            ูุง ุงููุดููุฉ ุงูุชู ุชูุงุฌู ูุฑูู ูู ุงููุตุฉุ
                        <div class="answers options">
                            <div class="confetti-right">
                                <span class="target rounded-3 me-3" data-accept="words">&nbsp;</span>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                            </div>
                        </div>
                        </h5>
                        <ul class="drag-options options d-flex justify-content-center">
                            <li class="option" data-target="book"> <button class="button main-button m-1">ูุฑูู ูุง ุชุฌุฏ ูุชุงุจูุง ููุงุณุจูุง</button></li>
                            <li class="option" data-target="words"> <button class="button main-button m-1">ุงููููุงุช ุชุฎุชูู ูู ุงููุชุจ</button></li>
                        </ul> 
                    </div>
                </div>
            </div>
            
            <!-- 2 -->
            <div class="carousel-item section-1">
                <div class="small-activity text-center pt-3  mx-auto">
                    <div class="content mx-auto">
                        <h5 class="text-end"><i class="fa-regular fa-comment fs-4 ms-2"></i>ุงุณุชุฎุฑุฌ ุงููุดููุฉ ูู ุงููุตุฉ ุงูุชุงููุฉ:</h5>
                        <div class="story d-flex align-items-center gap-2 rounded-4 p-3 py-2 mx-auto my-3 border border-2 border-white">
                            <div class="right-side text-center">  
                                <h5 class="mb-0"><i class="fa-solid fa-book ms-2 fs-6"></i>ูุตุฉ ุฑุญูุฉ ุงูุญุฏููุฉ</h5>
                                <img class="my-3 rounded-4" src="../..//static/images/ูุฑุญุงู.jpeg" alt=" ูุฑุญุงู">
                                <audio class="w-100 rounded-4" controls controlslist="nodownload noplaybackrate">
                                    <source id="audioSource" src="../../static/audio/activity/ูุฑุญุงู.mp3" type="audio/mpeg">
                                    ุงููุชุตูุญ ุงูุฎุงุต ุจู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช
                                </audio>
                            </div>
                            <p class="left-side text-end mb-0">
                                ูุงู ููุงู ุฃุฑูุจ ุตุบูุฑ ูุฏุนู "ูุฑุญุงู" ูุญุจ ุงูุฌุฒุฑ ูุซูุฑูุง.<br>
                                ูู ููู ูู ุงูุฃูุงูุ ูุฌุฏ ุญููุงู ูููุฆูุง ุจุงูุฌุฒุฑุ ูููู ูุงู ููุงู ุณูุงุฌ ุนุงูู ูููุนู ูู ุงูุฏุฎูู.<br>
                                ููุฑ ูุฑุญุงู ูุณุฃู ุตุฏููุชู ุงูุณูุญูุงุฉ "ูููุง" ูููุณุงุนุฏุฉ.<br>
                                ุชุนุงูููุง ูุนูุง ููุฌุฏูุง ููุงููุง ููุฎูุถูุง ูู ุงูุณูุงุฌ.<br>
                                ุฏุฎููุง ุงูุญูู ูุฃูููุง ุงูุฌุฒุฑ ุญุชู ุดุจุนูุง.<br>
                            </p>
                        </div>
                    </div>
                    
                    <div class="question">
                        <h6><i class="fa-regular fa-comment fs-4 ms-2"></i>ูุง ูู ุงููุดููุฉ ุงูุชู ูุงุฌููุง ุงูุฃุฑูุจ "ูุฑุญุงู" ูู ุงููุตุฉุ </h6>
                        <div class="options">
                            <div class="confetti-right confetti-click">
                                <button class="right button main-button m-1" onclick="optionClick(this)">
                                    <i class="fa-solid fa-lightbulb ms-1"></i> ูุงู ููุงู ุณูุงุฌ ุนุงูู ูููุนู ูู ุฏุฎูู ุญูู ุงูุฌุฒุฑ. 
                                </button>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>
                                <i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i><i class="conf-i"></i>      
                            </div>
                            <button class="wrong wrong-button button main-button m-1" onclick="optionClick(this)" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="ุงูุฑุฃ ุงูุณุทุฑ ุงูุซุงูู ุจุชุฑููุฒ">
                                <i class="fa-solid fa-lightbulb ms-1"></i>ูู ููู ูุฏูู ุฃุตุฏูุงุก.
                            </button>
                            <button class="wrong wrong-button button main-button m-1" onclick="optionClick(this)" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="ุงูุฑุฃ ุงูุณุทุฑ ุงูุซุงูู ุจุชุฑููุฒ">
                                <i class="fa-solid fa-lightbulb ms-1"></i>ูุงู ุฎุงุฆููุง ูู ุงูุญููุงูุงุช ุงูุฃุฎุฑู.
                            </button>
                        </div>
                    </div>
                </div>
                <div class="allQues-error-msg mt-5 text-danger text-center">ูู ุจุงูุฅุฌุงุจุฉ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ ูุฅููุงุก ุงููุดุงุท</div>

            </div>

            <button class="carousel-control-prev h-50 top-50 translate-middle-y" type="button" id="carouselPrev"  data-bs-target="#carouselCaracthers" data-bs-slide="prev" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="top" data-bs-title="ุงุถุบุท ููุงูุชูุงู ุฅูู ุงูุฌุฒุก ุงูุณุงุจู">
                <i class="fa-regular fa-circle-right"></i>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next h-50 top-50 translate-middle-y" type="button" id="carouselNext" data-bs-target="#carouselCaracthers" data-bs-slide="next" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="top" data-bs-title="ุงุถุบุท ููุงูุชูุงู ุฅูู ุงูุฌุฒุก ุงูุชุงูู">
                <i class="fa-regular fa-circle-left"></i>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

    </div>

    <div class="back-activities text-start mt-5"> 
        <button class="back-activities-btn button main-button text-start"><i class="fa-solid fa-arrow-right-from-bracket"></i>  ุงูุฑุฌูุน ููุฃูุดุทุฉ</button>
    </div>
</div>
{% endblock %}
{% block script %}
<script>
    // Click On Back To Activites
    document.querySelector(".back-activities-btn").addEventListener("click", () => {
        // Check if at least one question is answered
        if (
            Array.from(document.querySelectorAll(".options button")).some(button => button.classList.contains("active-right") || button.classList.contains("active-wrong")) ||
            Array.from(document.querySelectorAll(".quiz-wrapper .target")).some(img => img.classList.contains("active-right") || img.classList.contains("active-wrong")) 
       ){
            Swal.fire({
                title: 'ูุบุงุฏุฑุฉ ุงููุดุงุท',
                text: "ุฅุฐุง ุบุงุฏุฑุช ุงูุขูุ ูุฏ ุชููุฏ ุฅุฌุงุจุงุชู ุงูุญุงููุฉ. ูู ุฃูุช ูุชุฃูุฏ ุฃูู ุชุฑูุฏ ุงููุบุงุฏุฑุฉุ",
                icon: 'info',
                showCancelButton: true,
                confirmButtonText: 'ูุนู',
                cancelButtonText: 'ูุงุ ุฃูุฏ ุฅููุงู ุงููุดุงุท',
                reverseButtons: true // Swaps the position of confirm and cancel buttons
            }).then(async (result) => { // ุชุฃูุฏ ูู ุฌุนู ุงูุฏุงูุฉ ุฏุงุฎู then ูุชุฒุงููุฉ
                if (result.isConfirmed) {
                        window.location.href = '/activities/all_activities';
                    }
                })
            }
            else {
                window.location.href = '/activities/all_activities';
            }
    })

    const myCarousel = document.querySelector('#carouselCaracthers');
    const carousel = new bootstrap.Carousel(myCarousel, {
        wrap: false // Stops Going Back To First Section
    });
    // Hide And Display Arrows
    const nextButton = document.querySelector('#carouselNext');
    const prevButton = document.querySelector('#carouselPrev');
    prevButton.style.display = 'none';

    myCarousel.addEventListener('slid.bs.carousel', (event) => {
        const totalItems = document.querySelectorAll('#carouselCaracthers .carousel-item').length; // Number Of Items
        const currentIndex = event.to; // Current Item

        // Move User To Up
        var offsetTop =  document.querySelector('.problem-container .carousel').getBoundingClientRect().top + window.scrollY - 10;
        window.scrollTo({top: offsetTop,behavior: 'smooth'});

        // Hide Tooltips
        var tooltips = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        // ุงูุชูุฑุงุฑ ุนูู ูู ุนูุตุฑ ุชููุชูุจ ูุฅุฎูุงุคู
        tooltips.forEach(function (tooltipTriggerEl) {
            var tooltipInstance = bootstrap.Tooltip.getInstance(tooltipTriggerEl);
                tooltipInstance.hide(); // ุฅุฎูุงุก ุงูุชููุชูุจ
        });

        // Hide Prev Button If User In First Item
        if (currentIndex === 0) {
            prevButton.style.display = 'none';
        } else {
            prevButton.style.display = 'flex';
        }
       // Hide Next Button If User Reach Last Item
       if (currentIndex === totalItems - 1) {
        nextButton.style.display = 'none';
    } else {
        nextButton.style.display = 'flex'; 
    }

     // Check If All Answerd
     let allTrue = false; // Start as false
    if (
        document.querySelector(".options button.right").classList.contains("active-right") &&
        document.querySelector(".quiz-wrapper .target").classList.contains("active-right")
        ) {
            allTrue = true;
            Swal.fire({
                title: "๐ ููุฏ ุงูุชููุช ูู ุงููุดุงุท ุจูุฌุงุญ ๐",
                text: "ุงููุดููุฉ ูู ุฌููุฑ ูู ูุตุฉ ูุดููุฉ! ุฅููุง ุงููุญุธุฉ ุงูุชู ูุชุบูุฑ ูููุง ูู ุดูุก. ูููุง ูุงูุช ุงููุดููุฉ ูุซูุฑุฉ ููููุฆุฉ ุจุงูุชุญุฏูุงุชุ ุฒุงุฏุช ูุชุนุฉ ุงููุตุฉ ูุชุฃุซูุฑูุง!",
                imageUrl: "../../static/images/applause.png",
                imageWidth: 120,
                imageHeight: 120,
                showCancelButton: true, // ุฅุธูุงุฑ ุฒุฑ ุงูุฅูุบุงุก
                confirmButtonText: "ุนูุฏุฉ ููุฃูุดุทุฉ", // ุฒุฑ ุงูุชุฃููุฏ
                cancelButtonText:"ุงูุจูุงุก ููุง",
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/activities/all_activities';
                }
            });
            bigConfetti(); // Show Confetti
        }
    });

    // @@@@@@@@@ Multiple Choice Questions @@@@@@@@@
    function optionClick(button) {
        if (button.classList.contains("wrong")) {
            button.classList.add("active-wrong")
        }
        else {
            button.classList.add("active-right")
        }
    }

    
// ุงูุชุนุงูู ูุน ุงูุณุญุจ ูุงูุฅููุงุช
function allowDrop(event) {
    event.preventDefault();
}

function drag(event) {
    event.dataTransfer.setData('text', event.target.id);
}

function drop(event, correctAnswer) {
    event.preventDefault();
    const data = event.dataTransfer.getData('text');
    const draggedElement = document.getElementById(data);

    if (draggedElement.textContent === correctAnswer) {
        event.target.textContent = draggedElement.textContent;
        event.target.classList.add('success');
        event.target.classList.remove('error');
        
    } else {
        event.target.classList.add('error');
        setTimeout(() => {
            event.target.classList.remove('error');
           }, 1000); // ุฅุฒุงูุฉ ุงูููู ุงูุฃุญูุฑ ุจุนุฏ ุซุงููุฉ
    }
    
}

// If Last Qustion Was Answerd
document.querySelector(".carousel-item:last-of-type .options button.right").addEventListener("click", ()=> {
    if (
        document.querySelector(".options button.right").classList.contains("active-right") &&
        document.querySelector(".quiz-wrapper .target").classList.contains("active-right")
        ) {
            allTrue = true;
            Swal.fire({
                title: "๐ ููุฏ ุงูุชููุช ูู ุงููุดุงุท ุจูุฌุงุญ ๐",
                text: "ุงููุดููุฉ ูู ุฌููุฑ ูู ูุตุฉ ูุดููุฉ! ุฅููุง ุงููุญุธุฉ ุงูุชู ูุชุบูุฑ ูููุง ูู ุดูุก. ูููุง ูุงูุช ุงููุดููุฉ ูุซูุฑุฉ ููููุฆุฉ ุจุงูุชุญุฏูุงุชุ ุฒุงุฏุช ูุชุนุฉ ุงููุตุฉ ูุชุฃุซูุฑูุง!",
                imageUrl: "../../static/images/applause.png",
                imageWidth: 120,
                imageHeight: 120,
                showCancelButton: true, // ุฅุธูุงุฑ ุฒุฑ ุงูุฅูุบุงุก
                confirmButtonText: "ุนูุฏุฉ ููุฃูุดุทุฉ", // ุฒุฑ ุงูุชุฃููุฏ
                cancelButtonText:"ุงูุจูุงุก ููุง",
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/activities/all_activities';
                }
            });
            bigConfetti(); // Show Confetti
        }
})

</script>
{% endblock %}